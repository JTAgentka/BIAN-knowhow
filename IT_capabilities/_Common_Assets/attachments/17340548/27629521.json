{
  "title": "portfolioOverview",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "Portfolio overview schema",
  "required": [
    "businessChangeDate",
    "portfolioIds",
    "owner",
    "shortName",
    "pfCurrency",
    "created",
    "pfCategoryCode",
    "pfRoleCode",
    "pfModeCode",
    "managingCompanyTag",
    "managingCompanyId",
    "marginTradingAllowed",
    "creditLimit",
    "status"
  ],
  "type": "object",
  "properties": {
    "X-Correlation-ID": {
      "type": [
        "string",
        "null"
      ],
      "title": "X-Correlation-ID",
      "description": "Correlation identifier"
    },
    "businessChangeDate": {
      "description": "Datum a čas poslední změny entity",
      "type": "string",
      "format": "date-time"
    },
    "portfolioIds": {
      "type": "object",
      "description": "Portfolio identifiers",
      "$ref": "#/definitions/portfolioIds"
    },
    "owner": {
      "type": "object",
      "description": "Person details",
      "$ref": "#/definitions/person"
    },
    "shortName": {
      "description": "Zkratka portfolia",
      "type": "string"
    },
    "pfCurrency": {
      "description": "Měna portfolia",
      "type": "string"
    },
    "created": {
      "description": "Datum vytvoření portfolia",
      "type": "string",
      "format": "date-time"
    },
    "activityEnd": {
      "description": "Datum konce aktivity portfolia (může být v budoucnu)",
      "type": [
        "string",
        "null"
      ],
      "format": "date"
    },
    "pfCategoryCode": {
      "description": "Kód kategorie portfolia TOPASu",
      "type": "string"
    },
    "isIu": {
      "description": "Typ portfolia TOPAS - true= IU, false = TU",
      "type": [
        "boolean",
        "null"
      ]
    },
    "pfRoleCode": {
      "description": "Role portfolia TOPAS",
      "type": "string",
      "enum": [
        "client",
        "counterparty",
        "issuer"
      ]
    },
    "pfModeCode": {
      "description": "Režim portfolia - kód TOPAS",
      "type": "string"
    },
    "managingCompanyTag": {
      "description": "Příslušnost portfolia ke společnosti - barva klienta: J&T ČR - silver, J&T SR - green",
      "type": "string",
      "enum": [
        "silver",
        "green"
      ]
    },
    "managingCompanyId": {
      "description": "Příslušnost portfolia ke společnosti - apl kód instituce z číselníku institucí eBroker",
      "type": "string"
    },
    "marginTradingAllowed": {
      "description": "Příznak povolení maržového obchodování",
      "type": "boolean"
    },
    "creditLimit": {
      "description": "Maximální povolený úvěr",
      "type": "number"
    },
    "status": {
      "description": "Stav businessové platnosti entity: active - aktivní, deleted - info o zrušeném záznamu",
      "type": "string",
      "enum": [
        "active",
        "deleted"
      ]
    }
  },
  "definitions": {
    "portfolioIds": {
      "description": "Portfolio identifiers",
      "type": "object",
      "required": [
        "ebrokerId",
        "topasId"
      ],
      "properties": {
        "ebrokerId": {
          "type": "integer",
          "description": "Portfolio identification in eBroker"
        },
        "topasId": {
          "type": "integer",
          "description": "Portfolio identification in TOPAS"
        },
        "taId": {
          "type": [
            "integer",
            "null"
          ],
          "description": "Portfolio identification in TA"
        }
      }
    },
    "person": {
      "description": "Person details",
      "type": "object",
      "required": [
        "crmId"
      ],
      "properties": {
        "crmId": {
          "type": "string",
          "description": "Unique CRM identifier",
          "minLength": 10,
          "maxLength": 10
        }
      }
    }
  }
}