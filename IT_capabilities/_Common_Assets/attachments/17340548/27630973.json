{
  "$schema": "https://json-schema.org/draft-07/schema",
  "$id": "http://acmark.com/jtb/IQTemplateTopicSchema.json",
  "description": "CRM Investment Questionnaire template Schema",
  "definitions": {
    "QuestionData": {
      "type": "object",
      "required": [
        "mandatory",
        "_internal",
        "triggerSectionEval"
      ],
      "properties": {
        "subquestions": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/definitions/QuestionData"
          },
          "description": "Kolekce podotázek"
        },
        "questionId": {
          "type": [
            "string",
            "null"
          ],
          "format": "uuid",
          "description": "GUID otázky"
        },
        "textCz": {
          "type": [
            "string",
            "null"
          ],
          "description": "Text otázky pro českou mutaci dotazníku"
        },
        "textSk": {
          "type": [
            "string",
            "null"
          ],
          "description": "Text otázky pro slovenskou mutaci dotazníku"
        },
        "textEn": {
          "type": [
            "string",
            "null"
          ],
          "description": "Text otázky pro anglickou mutaci dotazníku"
        },
        "subversionIdentificator": {
          "type": [
            "string",
            "null"
          ],
          "description": "Identifikátor otázky v rámci verze dotazníku",
          "examples": [
            "d6",
            "d6a1"
          ]
        },
        "sequenceNumber": {
          "type": [
            "integer",
            "null"
          ],
          "format": "int32",
          "description": "Pořadí otázky. Nezobrazovat na front-endu, číselná řada nemusí být spojitá!"
        },
        "questionNumber": {
          "type": [
            "string",
            "null"
          ],
          "description": "Číslo otázky, lze zobrazit na front-endu"
        },
        "type": {
          "enum": [
            "Default",
            "TableParent",
            "TableCol"
          ],
          "type": "string",
          "description": "Typ otázky"
        },
        "answers": {
          "type": [
            "array",
            "null"
          ],
          "description": "Kolekce odpovědí",
          "items": {
            "$ref": "#/definitions/AnswerData"
          }
        },
        "mandatory": {
          "type": [
            "boolean"
          ],
          "description": "Příznak, zda se jedná o povinnou otázku pro vyhodnocení"
        },
        "picture": {
          "type": [
            "string",
            "null"
          ],
          "format": "byte",
          "description": "Obrázek k otázce"
        },
        "parentQuestionId": {
          "type": [
            "string",
            "null"
          ],
          "format": "uuid",
          "description": "Reference na nadřazenou otázku"
        },
        "_internal": {
          "type": [
            "boolean"
          ],
          "description": "Interní otázka, hodnota se dpoňuje z CRM"
        },
        "triggerSectionEval": {
          "type": [
            "boolean"
          ],
          "description": "Odpověď na otázku způsobuje změnu zobrazených otázek na formuláři, doporučeno zavolat průběžné vyhodnocení sekce."
        },
        "descriptionCz": {
          "type": [
            "string",
            "null"
          ],
          "description": "Doplňující informace k otázce pro českou mutaci dotazníku"
        },
        "descriptionSk": {
          "type": [
            "string",
            "null"
          ],
          "description": "Doplňující informace k otázce pro slovenskou mutaci dotazníku"
        },
        "descriptionEn": {
          "type": [
            "string",
            "null"
          ],
          "description": "Doplňující informace k otázce pro anglickou mutaci dotazníku"
        }
      }
    },
    "AnswerData": {
      "type": "object",
      "required": [
        "noteRequired",
        "deprecated"
      ],
      "properties": {
        "answerId": {
          "type": [
            "string",
            "null"
          ],
          "format": "uuid",
          "description": "GUID odpovědi"
        },
        "textCz": {
          "type": [
            "string",
            "null"
          ],
          "description": "Text odpovědi pro českou mutaci dotazníku"
        },
        "textSk": {
          "type": [
            "string",
            "null"
          ],
          "description": "Text odpovědi pro slovenskou mutaci dotazníku"
        },
        "textEn": {
          "type": [
            "string",
            "null"
          ],
          "description": "Text odpovědi pro anglickou mutaci dotazníku"
        },
        "subversionIdentificator": {
          "type": [
            "string",
            "null"
          ],
          "description": "Identifikátor odpovědi v rámci verze dotazníku",
          "examples": [
            "d6_1",
            "d6a1_3"
          ]
        },
        "sequenceNumber": {
          "type": [
            "integer",
            "null"
          ],
          "description": "Pořadové číslo odpovědi"
        },
        "answerType": {
          "type": [
            "string",
            "null"
          ],
          "description": "Typ odpovědi",
          "enum": [
            "Checkbox",
            "CheckboxString",
            "Radio",
            "RadioString",
            "String",
            "CheckboxNumber",
            "RadioNumber",
            "Number",
            "CheckboxDate",
            "RadioDate",
            "Date",
            "CheckboxDropdown",
            "RadioDropdown",
            "Dropdown",
            "DropdownValue"
          ]
        },
        "noteRequired": {
          "type": [
            "boolean"
          ],
          "description": "Příznak povinnosti vpísané hodnoty"
        },
        "answerExclusivity": {
          "type": [
            "string",
            "null"
          ],
          "description": "Exkluzivita odpovědi",
          "enum": [
            "None",
            "Section",
            "Question"
          ]
        },
        "deprecated": {
          "type": [
            "boolean"
          ],
          "description": "Příznak zastaralosti odpovědi (true = nebude se zobrazovat na nových dotaznících)"
        },
        "subAnswers": {
          "type": [
            "array",
            "null"
          ],
          "description": "Kolekce podpodpovědí",
          "items": {
            "$ref": "#/definitions/AnswerData"
          }
        }
      }
    }
  },
  "type": "object",
  "required": [
    "questionnaireId",
    "questionnaireTypeId",
    "state",
    "timestamp"
  ],
  "properties": {
    "X-Correlation-ID": {
      "type": [
        "string",
        "null"
      ],
      "description": "Korelační identifikátor pro inicializaci a rekonciliaci"
    },
    "questionnaireId": {
      "description": "ID šablony dotazníku",
      "type": "string",
      "format": "uuid"
    },
    "name": {
      "description": "Pojmenování šablony dotazníku",
      "type": [
        "string",
        "null"
      ]
    },
    "questionnaireTypeId": {
      "description": "Identifikátor typu dotazníku",
      "type": "string",
      "format": "uuid"
    },
    "questionnaireTypeName": {
      "description": "Pojmenování typu dotazníků",
      "type": [
        "string",
        "null"
      ]
    },
    "versionId": {
      "description": "GUID verze dotazníku",
      "type": [
        "string",
        "null"
      ],
      "format": "uuid"
    },
    "versionName": {
      "type": [
        "string",
        "null"
      ],
      "description": "Název verze dotazníku",
      "examples": [
        "v7.0 CZ FO",
        "v7.0 CZ PO",
        "v7.0 CZ Profi",
        "v7.0 SK Profi",
        "v7.0 SK PO",
        "v7.0 SK FO"
      ]
    },
    "parentVersionId": {
      "description": "Reference na nadřazenou verzi",
      "type": [
        "string",
        "null"
      ],
      "format": "uuid"
    },
    "action": {
      "description": "Typ operace. NULL pro rekonciliaci/inicializaci.",
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "create",
            "update",
            "delete"
          ]
        },
        {
          "type": "null"
        }
      ]
    },
    "timestamp": {
      "description": "Datum a čas operace",
      "type": [
        "string",
        "null"
      ],
      "format": "date-time"
    },
    "state": {
      "description": "Stav šablony dotazníku, možná by měl být veden jako číselník",
      "enum": [
        "Concept",
        "Active",
        "Obsolete",
        "Inactive"
      ],
      "type": "string"
    },
    "sections": {
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "object",
        "properties": {
          "questions": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/definitions/QuestionData"
            }
          },
          "sectionId": {
            "description": "GUID sekce dotazníku",
            "type": [
              "string",
              "null"
            ],
            "format": "uuid"
          },
          "nameCz": {
            "type": [
              "string",
              "null"
            ],
            "description": "Název sekce pro českou mutaci dotazníku"
          },
          "nameSk": {
            "type": [
              "string",
              "null"
            ],
            "description": "Název sekce pro slovenskou mutaci dotazníku"
          },
          "nameEn": {
            "type": [
              "string",
              "null"
            ],
            "description": "Název sekce pro anglickou mutaci dotazníku"
          },
          "sequenceNumber": {
            "type": [
              "integer",
              "null"
            ],
            "format": "int32",
            "description": "Pořadí sekce. Nezobrazovat na front-endu, číselná řada nemusí být spojitá!"
          },
          "sectionTypeId": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid",
            "description": "GUID typu sekce"
          },
          "sectionTypeName": {
            "description": "Název typu sekce",
            "type": [
              "string",
              "null"
            ],
            "examples": [
              "aml_typology",
              "typology",
              "default",
              "client_info",
              "aml_iq",
              "aml",
              "aml_iq_typology"
            ]
          },
          "subversionIdentificator": {
            "type": [
              "string",
              "null"
            ],
            "description": "Identifikátor sekce v rámci verze dotazníku"
          },
          "descriptionCz": {
            "type": [
              "string",
              "null"
            ],
            "description": "Doplňující informace k skeci pro českou mutaci dotazníku"
          },
          "descriptionSk": {
            "type": [
              "string",
              "null"
            ],
            "description": "Doplňující informace k skeci pro slovenskou mutaci dotazníku"
          },
          "descriptionEn": {
            "type": [
              "string",
              "null"
            ],
            "description": "Doplňující informace k skeci pro anglickou mutaci dotazníku"
          }
        }
      }
    }
  }
}