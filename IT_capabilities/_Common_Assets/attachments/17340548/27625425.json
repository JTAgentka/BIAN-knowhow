{
  "$schema": "https://json-schema.org/draft-07/schema",
  "$id": "http://acmark.com/jtb/ContactTopicSchema.json",
  "description": "CRM Contact Schema",
  "type": "object",
  "required": [
    "contactId",
    "kontaktData",
    "timestamp"
  ],
  "properties": {
    "X-Correlation-ID": {
      "type": [
        "string",
        "null"
      ],
      "description": "Korelační identifikátor pro inicializaci a rekonciliaci"
    },
    "contactId": {
      "description": "Interní CRM GUID primární klíč, vždy vyplněno",
      "type": "string",
      "format": "uuid"
    },
    "action": {
      "description": "Typ operace. NULL pro rekonciliaci/inicializaci.",
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "create",
            "update",
            "delete"
          ]
        },
        {
          "type": "null"
        }
      ]
    },
    "timestamp": {
      "description": "Datum a čas operace",
      "type": "string",
      "format": "date-time"
    },
    "klientId": {
      "description": "Klient ID (KLID)",
      "type": [
        "string",
        "null"
      ],
      "examples": [
        1000018856
      ]
    },
    "kontaktData": {
      "description": "Informace o kontaktu",
      "type": "object",
      "required": [
        "general",
        "additionalInformationAndDates",
        "state"
      ],
      "properties": {
        "general": {
          "description": "Obecné informace o kontaktu",
          "type": "object",
          "required": [
            "info"
          ],
          "properties": {
            "info": {
              "description": "Základní informace o kontaktu",
              "type": "object",
              "required": [
                "nameSurname",
                "firstName"
              ],
              "properties": {
                "nameSurname": {
                  "description": "Příjmení",
                  "type": "string"
                },
                "firstName": {
                  "description": "Jméno",
                  "type": "string"
                },
                "middleName": {
                  "description": "Druhé jméno",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "degreeBeforeId": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Titul před jménem (apicode)"
                },
                "degreeAfterId": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Titul za jménem (apicode)"
                }
              }
            },
            "communication": {
              "description": "Komunikace",
              "type": "object",
              "properties": {
                "phonePrimary": {
                  "description": "Primární telefon",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "emailPrimary": {
                  "description": "Primární e-mail",
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "email"
                }
              }
            }
          }
        },
        "addresses": {
          "description": "Adresy",
          "type": "object",
          "properties": {
            "permanentAddress": {
              "description": "Trvalá adresa",
              "type": "object",
              "required": [
                "street",
                "houseNumber",
                "postalCode",
                "city",
                "countryId"
              ],
              "properties": {
                "street": {
                  "description": "Ulice",
                  "type": "string"
                },
                "houseNumber": {
                  "description": "Číslo popisné",
                  "type": "string"
                },
                "orientationNumber": {
                  "description": "Číslo orientační",
                  "type": ["string", "null"]
                },
                "postalCode": {
                  "description": "PSČ",
                  "type": "string"
                },
                "city": {
                  "description": "Město",
                  "type": "string"
                },
                "countryId": {
                  "type": "string",
                  "description": "Země (apicode)",
                  "examples": [
                    "CZE"
                  ]
                },
                "regionId": {
                  "type": ["string", "null"],
                  "description": "Kraj (apicode)",
                  "examples": [
                    "CZ064"
                  ]
                }
              }
            }
          }
        },
        "preferences": {
          "description": "Předvolby",
          "type": "object",
          "properties": {
            "gender": {
              "description": "Pohlaví",
              "type": "object",
              "required": [
                "gender"
              ],
              "properties": {
                "gender": {
                  "description": "Pohlaví",
                  "anyOf": [
                    {
                      "type": "object",
                      "required": [
                        "value",
                        "label"
                      ],
                      "properties": {
                        "value": {
                          "description": "Hodnota CRM enumerátoru/OptionSetu",
                          "type": "integer",
                          "examples": [
                            1,
                            2
                          ]
                        },
                        "label": {
                          "description": "Popisek číselníkové hodnoty z CRM",
                          "type": "string",
                          "examples": [
                            "Muž",
                            "Žena"
                          ]
                        }
                      }
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            "identity": {
              "description": "Totožnost, narození",
              "type": "object",
              "required": [ "identityDocumentValidityUnlimited" ],
              "properties": {
                "identityDocumentType": {
                  "description": "Druh dokladu totožnosti",
                  "anyOf": [
                    {
                      "type": "object",
                      "required": [
                        "value",
                        "label"
                      ],
                      "properties": {
                        "value": {
                          "description": "Hodnota CRM enumerátoru/OptionSetu",
                          "type": "integer",
                          "examples": [
                            500000000
                          ]
                        },
                        "label": {
                          "description": "Popisek číselníkové hodnoty z CRM",
                          "type": "string",
                          "examples": [
                            "Pas",
                            "Občanský průkaz"
                          ]
                        }
                      }
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "identityDocumentNumber": {
                  "description": "Číslo dokladu totožnosti",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "nationalityId": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Státní příslušnost (apicode)",
                  "examples": [
                    "CZE"
                  ]
                },
                "identityDocumentValidFrom": {
                  "description": "Doklad totožnosti platný od",
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "date-time"
                },
                "identityDocumentValidTo": {
                  "description": "Doklad totožnosti platný od",
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "date-time"
                },
                "identityDocumentValidityUnlimited": {
                  "description": "Neomezená platnost dokladu totožnosti",
                  "type": [
                    "boolean"
                  ]
                },
                "identityDocumentIssuedBy": {
                  "description": "Doklad totožnosti vydal",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "birthPlace": {
                  "description": "Místo narození",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "birthCountryId": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Země narození (apicode)",
                  "examples": [
                    "SVK"
                  ]
                },
                "birthDate": {
                  "description": "Datum narození",
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "date-time"
                },
                "birthNumber": {
                  "description": "Rodné číslo",
                  "type": [
                    "string",
                    "null"
                  ]
                }
              }
            }
          }
        },
        "additionalInformationAndDates": {
          "description": "Další informace a data",
          "type": "object",
          "required": [
            "ownerId",
            "enableDigi"
          ],
          "properties": {
            "ownerId": {
              "type": "string",
              "examples": [
                "JTBA\\\\JT8100008"
              ],
              "description": "Zodpovědný (apicode)"
            },
            "klientId": {
              "description": "Klient ID (KLID)",
              "type": [
                "string",
                "null"
              ]
            },
            "sanctionListCheckResult": {
              "description": "Výsledek kontroly na SaSe",
              "anyOf": [
                {
                  "type": "object",
                  "required": [
                    "value",
                    "label"
                  ],
                  "properties": {
                    "value": {
                      "description": "Hodnota CRM enumerátoru/OptionSetu",
                      "type": "integer",
                      "examples": [
                        500000000
                      ]
                    },
                    "label": {
                      "description": "Popisek číselníkové hodnoty z CRM",
                      "type": "string",
                      "examples": [
                        "Prošel",
                        "Neprošel",
                        "Bez kontroly"
                      ]
                    }
                  }
                },
                {
                  "type": "null"
                }
              ]
            },
            "sanctionListCheckDate": {
              "description": "Kontrola na SaSe provedena dne",
              "type": [
                "string",
                "null"
              ],
              "format": "date-time"
            },
            "sanctionListCheckUser": {
              "type": [
                "string",
                "null"
              ],
              "description": "Kontrolu na SaSe provedl (apicode)",
              "examples": [
                "JTBA\\crm_admin"
              ]
            },
            "enableDigi": {
              "description": "Příznak, zda se má klient migrovat do DK",
              "type": "boolean"
            }
          }
        },
        "state": {
          "description": "Technický stav záznamu",
          "type": "object",
          "required": [
            "statecode",
            "statuscode",
            "anonymized",
            "deleted",
            "merged"
          ],
          "properties": {
            "statecode": {
              "description": "Statecode",
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    0,
                    1
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "Aktivní",
                    "Neaktivní"
                  ]
                }
              }
            },
            "statuscode": {
              "description": "Statuscode",
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    1,
                    2
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "Aktivní",
                    "Neaktivní"
                  ]
                }
              }
            },
            "anonymized": {
              "description": "Záznam byl anonymizován",
              "type": [
                "boolean"
              ]
            },
            "deleted": {
              "description": "Záznam byl smazán",
              "type": [
                "boolean"
              ]
            },
            "merged": {
              "description": "Záznam byl sloučen a deaktivován",
              "type": [
                "boolean"
              ]
            },
            "masterid": {
              "description": "GUID vítězného záznamu při slučování",
              "type": [
                "string",
                "null"
              ],
              "format": "uuid"
            }
          }
        }
      }
    }
  }
}
