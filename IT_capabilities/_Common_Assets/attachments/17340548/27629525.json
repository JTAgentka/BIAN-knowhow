{
  "title": "portfolioPosition",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "Portfolio position schema",
  "required": [
    "businessChangeDate",
    "portfolioIds",
    "instrumentIds",
    "depositoryAccTypeId",
    "positionCode",
    "pfCurrency",
    "instrumentCurrency",
    "tradedPosition",
    "settledPosition",
    "status"
  ],
  "type": "object",
  "properties": {
    "X-Correlation-ID": {
      "description": "Korelační identifikátor, povinné pro INIT a RECON",
      "type": [
        "string",
        "null"
      ]
    },
    "businessChangeDate": {
      "description": "Datum a čas poslední změny entity",
      "type": "string",
      "format": "date-time"
    },
    "portfolioIds": {
      "type": "object",
      "description": "Portfolio identifiers",
      "$ref": "#/definitions/portfolioIds"
    },
    "instrumentIds": {
      "type": "object",
      "description": "Instrument identifiers",
      "$ref": "#/definitions/instrumentIds"
    },
    "depositoryAccTypeId": {
      "description": "Depozitář - apl kód instituce z číselníku depositoryAccType",
      "type": "string"
    },
    "positionCode": {
      "description": "Pozice: A - Aktiva, C - Cross Currency Swap, D - Deriváty, J - CP Přijaté jako zajištění, K - Kapitál, L - Listinné CP, P - Pasiva, R - Reverzní REPO, T - Termínovaný vklad, V - Vlastní, Z - REPO",
      "type": "string",
      "enum": [
        "A",
        "C",
        "D",
        "J",
        "K",
        "L",
        "P",
        "R",
        "T",
        "V",
        "Z"
      ]
    },
    "pfCurrency": {
      "description": "Měna portfolia",
      "type": "string"
    },
    "instrumentCurrency": {
      "description": "Měna obchodování CP",
      "type": "string"
    },
    "tradedPosition": {
      "type": "object",
      "description": "Objekt pořizovací cena CP zobchodovaný stav - typ PortfolioPositionBasic. Ceny jsou uvedeny za celou pozici.",
      "$ref": "#/definitions/tradedPosition"
    },
    "settledPosition": {
      "type": "object",
      "description": "Objekt pořizovací cena CP vypořádaný stav - typ PortfolioPositionBasic. Ceny jsou uvedeny za celou pozici.",
      "$ref": "#/definitions/settledPosition"
    },
    "status": {
      "description": "Stav businessové platnosti entity: active - aktivní, deleted - info o zrušeném záznamu",
      "type": "string",
      "enum": [
        "active",
        "deleted"
      ]
    }
  },
  "definitions": {
    "portfolioIds": {
      "description": "Portfolio identifiers",
      "type": "object",
      "required": [
        "ebrokerId",
        "topasId"
      ],
      "properties": {
        "ebrokerId": {
          "type": "integer",
          "description": "Portfolio identification in eBroker"
        },
        "topasId": {
          "type": "integer",
          "description": "Portfolio identification in TOPAS"
        },
        "taId": {
          "type": [
            "integer",
            "null"
          ],
          "description": "Portfolio identification in TA"
        }
      }
    },
    "instrumentIds": {
      "description": "Instrument identifiers",
      "type": "object",
      "required": [
        "ebrokerId",
        "ccpId"
      ],
      "properties": {
        "ebrokerId": {
          "type": "integer",
          "description": "Instrument identification in eBroker"
        },
        "ccpId": {
          "type": "integer",
          "description": "Instrument identification in CCP"
        },
        "topasId": {
          "type": [
            "integer",
            "null"
          ],
          "description": "Instrument identification in TOPAS"
        },
        "taId": {
          "type": [
            "integer",
            "null"
          ],
          "description": "Instrument identification in TA"
        }
      }
    },
    "tradedPosition": {
      "description": "objekt pořizovací cena CP zobchodovaný stav - typ PortfolioPositionBasic. Ceny jsou uvedeny za celou pozici.",
      "type": "object",
      "required": [
        "quantity",
        "acquisitionPriceInstrCurrency",
        "acquisitionPricePfCurrency",
        "acquisitionPriceCZK",
        "acquisitionPriceEUR",
        "acquisitionPriceUSD"
      ],
      "properties": {
        "quantity": {
          "type": "number",
          "description": "Počet kusů CP - zobchodovaný stav"
        },
        "acquisitionPriceInstrCurrency": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPriceInstrCurrency"
        },
        "acquisitionPricePfCurrency": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPricePfCurrency"
        },
        "acquisitionPriceCZK": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPriceCZK"
        },
        "acquisitionPriceEUR": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPriceEUR"
        },
        "acquisitionPriceUSD": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPriceUSD"
        }
      }
    },
    "settledPosition": {
      "description": "Objekt pořizovací cena CP vypořádaný stav - typ PortfolioPositionBasic. Ceny jsou uvedeny za celou pozici.",
      "type": "object",
      "required": [
        "quantity",
        "acquisitionPriceInstrCurrency",
        "acquisitionPricePfCurrency",
        "acquisitionPriceCZK",
        "acquisitionPriceEUR",
        "acquisitionPriceUSD"
      ],
      "properties": {
        "quantity": {
          "type": "number",
          "description": "Počet kusů CP - zobchodovaný stav"
        },
        "acquisitionPriceInstrCurrency": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPriceInstrCurrency"
        },
        "acquisitionPricePfCurrency": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPricePfCurrency"
        },
        "acquisitionPriceCZK": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPriceCZK"
        },
        "acquisitionPriceEUR": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPriceEUR"
        },
        "acquisitionPriceUSD": {
          "type": "object",
          "description": "Pořizovací cena - měna CP",
          "$ref": "#/definitions/acquisitionPriceUSD"
        }
      }
    },
    "acquisitionPriceInstrCurrency": {
      "description": "Pořizovací cena - měna CP",
      "type": "object",
      "required": [
        "gross",
        "net",
        "aI"
      ],
      "properties": {
        "gross": {
          "type": "number",
          "description": "Pořizovací cena s poplatky, bez AÚV v měně CP a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál."
        },
        "net": {
          "type": "number",
          "description": "Pořizovací cena bez poplatků a AÚV v měně CP a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál."
        },
        "aI": {
          "type": "number",
          "description": "Pořizovací AÚV v měně CP"
        }
      }
    },
    "acquisitionPricePfCurrency": {
      "description": "Pořizovací cena - měna portfolia",
      "type": "object",
      "required": [
        "gross",
        "net",
        "aI"
      ],
      "properties": {
        "gross": {
          "type": "number",
          "description": "Pořizovací cena s poplatky, bez AÚV v měně portfolia a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál."
        },
        "net": {
          "type": "number",
          "description": "Pořizovací cena bez poplatků a AÚV v měně portfolia a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál. Přepočteno kurzem ČNB/ECB střed."
        },
        "aI": {
          "type": "number",
          "description": "Pořizovací AÚV v měně portfolia"
        }
      }
    },
    "acquisitionPriceCZK": {
      "description": "Pořizovací cena - CZK",
      "type": "object",
      "required": [
        "gross",
        "net",
        "aI"
      ],
      "properties": {
        "gross": {
          "type": "number",
          "description": "Pořizovací cena s poplatky, bez AÚV v CZK a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál."
        },
        "net": {
          "type": "number",
          "description": "Pořizovací cena bez poplatků a AÚV v CZK a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál. Přepočteno kurzem ČNB/ECB střed."
        },
        "aI": {
          "type": "number",
          "description": "Pořizovací AÚV v CZK"
        }
      }
    },
    "acquisitionPriceEUR": {
      "description": "Pořizovací cena - EUR",
      "type": "object",
      "required": [
        "gross",
        "net",
        "aI"
      ],
      "properties": {
        "gross": {
          "type": "number",
          "description": "Pořizovací cena s poplatky, bez AÚV v EUR a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál."
        },
        "net": {
          "type": "number",
          "description": "Pořizovací cena bez poplatků a AÚV v EUR a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál. Přepočteno kurzem ČNB/ECB střed."
        },
        "aI": {
          "type": "number",
          "description": "Pořizovací AÚV v EUR"
        }
      }
    },
    "acquisitionPriceUSD": {
      "description": "Pořizovací cena - USD",
      "type": "object",
      "required": [
        "gross",
        "net",
        "aI"
      ],
      "properties": {
        "gross": {
          "type": "number",
          "description": "Pořizovací cena s poplatky, bez AÚV v USD a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál."
        },
        "net": {
          "type": "number",
          "description": "Pořizovací cena bez poplatků a AÚV v USD a to v absolutní hodnotě. A to proto, že některé dluhopisy mohou být amortizované a mění se jim v čase nominál. Přepočteno kurzem ČNB/ECB střed."
        },
        "aI": {
          "type": "number",
          "description": "Pořizovací AÚV v USD"
        }
      }
    }
  }
}