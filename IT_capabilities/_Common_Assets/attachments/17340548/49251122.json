{
    "title": "ClientDocument",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "Client document schema",
    "required": [
        "action",
        "timestamp",
        "documentId",
        "entity",
        "parent",
        "after"
    ],
    "type": "object",
    "properties": {
        "X-Correlation-ID": {
            "description": "Korelační identifikátor, povinné pro INIT a RECON",
            "type": [
                "string",
                "null"
            ]
        },
        "action": {
            "description": "Operation type: create/delete/update",
            "type": "string",
            "enum": [
                "active",
                "deleted"
            ]
        },
        "timestamp": {
            "description": "Date and time of operation (UTC).",
            "type": "string",
            "format": "date-time"
        },
        "documentId": {
            "type": "string",
            "description": "Unique document ID for CRM DIGI API."
        },
        "entity": {
            "type": "object",
            "description": "Entity to which document belongs.",
             "$ref": "#/definitions/entity"
        },
        "parent": {
            "type": "object",
            "description": "Parent entity to which document belongs.",
            "$ref": "#/definitions/parent"
        },
        "before": {
            "type": "object",
            "description": "Document state before change.",
            "$ref": "#/definitions/documentState"
        },
        "after": {
            "type": "object",
            "description": "Document state after change.",
            "$ref": "#/definitions/documentState"
        }
    },
    "definitions": {
        "entity": {
            "description": "Entity to which document belongs.",
            "type": "object",
            "required": [
                "id",
                "type"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Entity ID to which document belongs."
                },
                "type": {
                    "type": "integer",
                    "description": "Entity type."
                }
            }
        },
        "parent": {
            "description": "Parent entity to which document belongs.",
            "type": "object",
            "required": [
                "id",
                "type"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "ID of parent entity. Usually client ID, under who contract is saved."
                },
                "type": {
                    "type": "string",
                    "description": "Parent entity type (account|contact)",
                    "enum": [
                        "account",
                        "contact"
                    ]
                }
            }
        },
        "documentState": {
            "description": "Document state before or after change.",
            "type": "object",
            "required": [
                "fileName",
                "fileSize",
                "category"
            ],
            "properties": {
                "fileName": {
                    "type": "string",
                    "description": "Document file name."
                },
                "fileSize": {
                    "type": "integer",
                    "description": "File size in bytes."
                },
                "category": {
                    "type": "string",
                    "description": "Folder in sharepoint document tree."
                },
                "operation": {
                    "type": "object",
                    "description": "Operation",
                    "$ref": "#/definitions/operation"
                },
                "ironMountain": {
                    "type": "object",
                    "description": "Iron Mountain info",
                    "$ref": "#/definitions/ironMountain"
                },
                "comment": {
                    "type": [
                        "string",
                        "null"
                    ],
                    "description": "Document file name."
                }
            }
        },
		"operation": {
            "description": "Operation.",
            "type": "object",
            "required": [
                "code",
                "name"
            ],
            "properties": {
                "code": {
                    "type": "string",
                    "description": "Operation code."
                },
                "name": {
                    "type": "string",
                    "description": "Operation name."
                }
            }
        },
		"ironMountain": {
            "description": "Information for Iron mountain.",
            "type": "object",
            "properties": {
                "barCodeBox": {
                    "type": [
                        "string",
                        "null"
                    ],
                    "description": "Number of box, where document is placed."
                },
                "status": {
                    "type": [
                        "string",
                        "null"
                    ],
                    "description": "Document status."
                }
            }
        }
		
    }
}