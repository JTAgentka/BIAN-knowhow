{
	"title": "DisponentRights",
	"$schema": "http://json-schema.org/draft-04/schema#",
	"description": "Topic pro získání oprávnění spojuje produkt s osobou disponenta a říká sadu oprávnění, které mohou být závislé na kanále.",
	"type": "object",
	"required": [
		"businessChangeDate",
		"disponent",
		"businessChangeApp",
		"businessChangeChannel",
		"products"
	],
	"properties": {
		"X-Correlation-ID": {
			"type": [
				"string",
				"null"
			],
			"description": "Korelační identifikátor, povinné pro INIT a RECON",
			"title": "X-Correlation-ID"
		},
		"businessChangeDate": {
			"type": "string",
			"description": "Datum a čas poslední změny entity",
			"format": "date-time"
		},
		"disponent": {
			"description": "Identifikace uživatele, jemuž jsou nastavena nebo měněna disponentská oprávnění.",
			"type": "object",
			"required": [
				"crmId"
			],
			"properties": {
				"crmId": {
					"type": "string",
					"description": "Unique CRM identifier",
					"minLength": 10,
					"maxLength": 10
				}
			}
		},
		"updatedBy": {
			"description": "Identifikace uživatele, který za klienta provedl změnu a to i za předpokladu, že změnu provedl bankéř, který se za daného uživatele přihlásil",
			"type": "object",
			"properties": {
				"crmId": {
					"type": [
						"string",
						"null"
					],
					"description": "Unique CRM identifier",
					"minLength": 10,
					"maxLength": 10
				},
				"bankerDomainName": {
					"type": [
						"string",
						"null"
					],
					"description": "Doménové jméno pracovníka banky, který za klienta provedl změnu",
					"minLength": 10,
					"maxLength": 10
				}
			}
		},
		"businessChangeApp": {
			"type": "string",
			"description": "Aplikace v které byla provedena změna",
			"enum": [
				"digitalBankingCZ",
				"mobileBankingCZ",
				"onbehalfBankingCZ"
			]
		},
		"businessChangeChannel": {
			"type": "string",
			"description": "Kanál ze kterého byla provedena změna",
			"enum": [
				"web",
				"callcentrum",
				"private"
			]
		},
		"products": {
			"type": "object",
			"description": "Produkty",
			"properties": {
				"investment": {
					"type": "object",
					"description": "Investice",
					"properties": {
						"portfolios": {
							"type": [
								"array",
								"null"
							],
							"description": "Kolekce disponentských opravnění k portfoliím",
							"items": {
								"type": "object",
								"required": [
									"portfolioIds",
									"authorizations"
								],
								"properties": {
									"portfolioIds": {
										"type": "object",
										"description": "Identifikátory portfolia",
										"required": [
											"ebrokerId"
										],
										"properties": {
											"ebrokerId": {
												"type": "integer",
												"description": "Identifikace portfolia v eBroker"
											},
											"topasId": {
												"type": [
													"integer",
													"null"
												],
												"description": "Identifikace Portfolia v TOPAS (KID)"
											},
											"taId": {
												"type": [
													"integer",
													"null"
												],
												"description": "Identifikace Účtu podílníka v TA"
											}
										}
									},
									"authorizations": {
										"type": "array",
										"description": "Kolekce autorizací",
										"items": {
											"type": "object",
											"required": [
												"channel",
												"disponentRights"
											],
											"properties": {
												"channel": {
													"type": "string",
													"description": "Disponentské oprávnění. Číselník Channels"
												},
												"disponentRights": {
													"type": "array",
													"description": "Disponentské oprávnění. Číselník DisponentRights",
													"items": {
														"type": "string"
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}