{
  "$schema": "https://json-schema.org/draft-07/schema",
  "$id": "http://acmark.com/jtb/IQTopicSchema.json",
  "description": "CRM Investment Questionnaire Schema",
  "type": "object",
  "required": [
    "accountId",
    "klientId",
    "filledByContactId",
    "filledByContactKlientId",
    "clientQuestionnaireId",
    "timestamp"
  ],
  "properties": {
    "X-Correlation-ID": {
      "type": [
        "string",
        "null"
      ],
      "description": "Korelační identifikátor pro inicializaci a rekonciliaci"
    },
    "accountId": {
      "description": "GUID klienta, jemuž dotazník patří",
      "type": "string",
      "format": "uuid"
    },
    "klientId": {
      "description": "Klient ID (KLID)",
      "type": "string",
      "examples": [
        1000018856
      ]
    },
    "filledByContactId": {
      "description": "GUID kontaktu, který vyplnil investiční dotazník",
      "type": "string",
      "format": "uuid"
    },
    "filledByContactKlientId": {
      "description": "KLID kontaktu, který vyplnil investiční dotazník",
      "type": "string",
      "examples": [
        1000018856
      ]
    },
    "action": {
      "description": "Typ operace. NULL pro rekonciliaci/inicializaci.",
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "create",
            "update",
            "delete"
          ]
        },
        {
          "type": "null"
        }
      ]
    },
    "timestamp": {
      "description": "Datum a čas operace",
      "type": "string",
      "format": "date-time"
    },
    "clientQuestionnaireId": {
      "description": "GUID instance aktuálně platného klientského dotazníku",
      "type": "string"
    },
    "clientAnswers": {
      "description": "clientAnswers",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "object",
        "properties": {
          "questionId": {
            "description": "Identifikátor otázky",
            "type": [
              "string",
              "null"
            ],
            "format": "uuid"
          },
          "answers": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "object",
              "properties": {
                "answerId": {
                  "description": "Identifikátor odpovědi",
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "uuid"
                },
                "crmEntityName": {
                  "description": "crmEntityName",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "note": {
                  "description": "poznámka",
                  "type": [
                    "string",
                    "null"
                  ]
                }
              }
            },
            "description": "Odpovědi na otázku"
          }
        }
      }
    },
    "evaluationVector": {
      "description": "vyhodnocení",
      "type": "object",
      "required": [
        "lossResistance",
        "marginTrading",
        "cashPooling"
      ],
      "properties": {
        "evaluationVectorId": {
          "description": "GUID vektoru vyhodnocení",
          "type": [
            "string",
            "null"
          ],
          "format": "uuid"
        },
        "clientAcquaintedOn": {
          "description": "Datum, kdy byl klient seznámen s vyhodnocením dotazníku",
          "type": [
            "string",
            "null"
          ],
          "format": "date-time"
        },
        "filledOn": {
          "description": "Datum vyplnění dotazníku",
          "type": [
            "string",
            "null"
          ],
          "format": "date-time"
        },
        "sentOn": {
          "description": "Datum předání vyhodnocení investičního dotazníku",
          "type": [
            "string",
            "null"
          ],
          "format": "date-time"
        },
        "questionnaireState": {
          "description": "Stav dotazníku",
          "type": "object",
          "required": [
            "value",
            "label"
          ],
          "properties": {
            "value": {
              "description": "Hodnota CRM enumerátoru/OptionSetu",
              "type": "integer",
              "examples": [
                500000000
              ]
            },
            "label": {
              "description": "Popisek číselníkové hodnoty z CRM",
              "type": "string",
              "examples": [
                "Pouze AML",
                "Autorizovaný"
              ]
            }
          }
        },
        "clientCategory": {
          "description": "Kategorie klienta",
          "anyOf": [
            {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    500000000
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "Pouze AML",
                    "Autorizovaný"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "derivates": {
          "description": "Využití derivátů",
          "anyOf": [
            {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    500000000
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "Ne",
                    "Pouze hedging"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "experience": {
          "description": "Znalosti a zkušenosti",
          "anyOf": [
            {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    500000000
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "Základní investor"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "liquidity": {
          "description": "Potřeba likvidity",
          "anyOf": [
            {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    500000000
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "nízká, je v souladu s finančním zázemím"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "lossResistance": {
          "description": "Schopnost nést ztráty",
          "type": [
            "boolean"
          ]
        },
        "marginTrading": {
          "description": "Maržové obchodování",
          "type": [
            "boolean"
          ]
        },
        "cashPooling": {
          "description": "Služba cash pooling",
          "type": [
            "boolean"
          ]
        },
        "riskCapacity": {
          "description": "Kapacita přijímat riziko",
          "anyOf": [
            {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    500000000
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "střední, je v souladu s finančním zázemím"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "riskTolerance": {
          "description": "Tolerance rizika - dle SRI",
          "anyOf": [
            {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    500000000
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "1-3",
                    4,
                    5,
                    "6-7"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "riskWillingness": {
          "description": "Ochota přijímat riziko",
          "anyOf": [
            {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    500000000
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "Velmi vysoká, je v souladu s očekáváním klienta"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "investmentHorizon": {
          "description": "Investiční horizont",
          "anyOf": [
            {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    500000000
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "1 - 3 roky, je v souladu s očkáváním klienta"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        },
        "investmentPreference": {
          "description": "Investiční preference",
          "anyOf": [
            {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "description": "Hodnota CRM enumerátoru/OptionSetu",
                  "type": "integer",
                  "examples": [
                    500000000,
                    500000001,
                    500000002
                  ]
                },
                "label": {
                  "description": "Popisek číselníkové hodnoty z CRM",
                  "type": "string",
                  "examples": [
                    "Ochrana",
                    "Růst",
                    "Kombinace"
                  ]
                }
              }
            },
            {
              "type": "null"
            }
          ]
        }
      }
    }
  }
}
