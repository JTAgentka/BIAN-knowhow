{
  "title": "CollAccountValuationInstant",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "Collection account valuation instant schema",
  "type": "object",
  "required": [
    "collAccountIds",
    "businessChangeDate",
    "portfolioIds",
    "accBalancesAccCurrency"
  ],
  "properties": {
    "X-Correlation-ID": {
      "type": [
        "string",
        "null"
      ],
      "title": "X-Correlation-ID",
      "description": "Correlation identifier"
    },
    "collAccountIds": {
      "type": "object",
      "description": "Collection account identifiers",
      "$ref": "#/definitions/collAccountIds"
    },
    "businessChangeDate": {
      "description": "Datum a čas poslední změny entity",
      "type": "string",
      "format": "date-time"
    },
    "portfolioIds": {
      "type": "object",
      "description": "Portfolio identifiers",
      "$ref": "#/definitions/portfolioIds"
    },
    "accCurrency": {
      "description": "Měna sběrného účtu",
      "type": "string"
    },
    "accBalancesAccCurrency": {
      "type": "object",
      "description": "Zůstatky na sběrném účtu v měně účtu",
      "$ref": "#/definitions/accBalancesAccCurrency"
    },
    "status": {
      "description": "Stav businessové platnosti entity: active - aktivní, deleted - info o zrušeném záznamu",
      "type": "string",
      "enum": [
        "active",
        "deleted"
      ]
    }
  },
  "definitions": {
    "collAccountIds": {
      "description": "Portfolio identifiers",
      "type": "object",
      "required": [
        "ebrokerId",
		"topasId",
		"taId",
        "accountNumber",
        "bankCode",
        "iban"
      ],
      "properties": {
        "ebrokerId": {
          "type": "integer",
          "description": "Collection account identification in eBroker",
          "minLength": 10,
          "maxLength": 10
        },
        "topasId": {
          "type": [
            "integer",
            "null"
          ],
          "description": "Collection account identification in TOPAS"
        },
        "taId": {
          "type": [
            "integer",
            "null"
          ],
          "description": "Collection account identification in TA"
        },
        "accountNumberPrefix": {
          "description": "Account prefix in BBAN format",
          "type": [
            "string",
            "null"
          ],
          "maxLength": 6
        },
        "accountNumber": {
          "description": "Account number in BBAN format",
          "type": "string",
          "maxLength": 10
        },
        "bankCode": {
          "description": "Code of the bank",
          "type": "string",
          "maxLength": 4
        },
        "iban": {
          "type": "string",
          "maxlength": 34,
          "description": "Account number in IBAN format."
        }
      }
    },
    "portfolioIds": {
      "description": "Portfolio identifiers",
      "type": "object",
      "required": [
        "ebrokerId",
        "topasId"
      ],
      "properties": {
        "ebrokerId": {
          "type": "integer",
          "description": "Portfolio identification in eBroker",
          "minLength": 10,
          "maxLength": 10
        },
        "topasId": {
          "type": "integer",
          "description": "Portfolio identification in TOPAS"
        },
        "taId": {
          "type": [
            "integer",
            "null"
          ],
          "description": "Portfolio identification in TA"
        }
      }
    },
    "person": {
      "description": "Person details",
      "type": "object",
      "required": [
        "crmId"
      ],
      "properties": {
        "crmId": {
          "type": "string",
          "description": "Unique CRM identifier",
          "minLength": 10,
          "maxLength": 10
        }
      }
    },
    "accBalancesAccCurrency": {
      "description": "Kolekce zůstatky na sběrném účtu v měně účtu",
      "type": "object",
      "required": [
        "blocked",
        "unsettled",
        "presettled",
        "settled"
      ],
      "properties": {
        "blocked": {
          "type": "number",
          "description": "Blokované (rezervované) prostředky v TA v měně SÚ. Blokované peníze se počítají jako suma Pohybů peněz, které mají nastaveno Je_Blokace, ale buď nemají nastaveno Je_Zobchodovan, nebo mají Datum zobchodování až po datu, ke kterému zobrazujeme stav portfolia"
        },
        "unsettled": {
          "type": "number",
          "description": "Zobchodovaný zůstatek na účtu v měně sběrného účtu"
        },
        "presettled": {
          "type": "number",
          "description": "Předvypořádaný (vypořádaný plus platební příkazy) zůstatek na účtech portfolia v měně sběrného účtu"
        },
        "settled": {
          "type": "number",
          "description": "Vypořádaný zůstatek na účtu v měně sběrného účtu"
        }
      }
    }
  }
}